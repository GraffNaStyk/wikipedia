{% extends layout %}

{% block content %}
  {% if search %}
    <div class="position-relative">
      <a href="{{ url('monsters/clear') }}" class="position-absolute" style="right:6px; top:3px;">Wyczyść filtry</a>
    </div>
  {% endif %}
  <div class="form_wrapper py-2 mx-2">
    <form action="{{ url('monsters/filter/search') }}" method="post">
      <div class="form__grid">
        {{ select({
          name: 'filter[]',
          data: filters,
          label: 'Fliter',
          placeholder: 'filter...',
          multiple: true,
          selected: search.filter
        }) }}
        {{ select({
          name: 'order',
          data: orders,
          label: 'Order',
          placeholder: 'order...',
          selected: search.order
        }) }}
        {{ input({
          type: 'hidden',
          name: 'page'
        }) }}
        <input type="Submit" class="mt-4" value="Search">
      </div>
    </form>
  </div>
  {% include 'components/pagination.twig' %}
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <td>Name</td>
        <td>Hp</td>
        <td>Experience</td>
        <td>Loot</td>
      </tr>
    </thead>
    <tbody>
    {% for monster in monsters %}
      <tr>
        <td>
          <a class="link" href="{{ url('monsters/show/'~monster.name) }}">
            <img src="{{ img(monster.path~monster.hash~'.'~monster.ext) }}" alt="">
            <b>{{ monster.name }}</b>
          </a>
        </td>
        <td>{{ monster.health }}</td>
        <td>{{ monster.experience }}</td>
        <td>
          {% for item in monster.loot %}
            <a href="{{ url('items/show/'~item.name) }}">
              <b style="color: black;" {{ tooltip(item.description) }} >{{ item.name }} </b>
              <img style=" cursor: pointer;" {{ tooltip(item.description) }} src="{{ img(item.path~item.hash~'.'~item.ext) }}" alt="">
            </a>
            <b style="color: black;"> ({{ item.chance }}%)</b>
            <br>
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
  {% include 'components/pagination.twig' %}
{% endblock %}
